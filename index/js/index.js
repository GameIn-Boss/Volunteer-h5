(function () {

    // 首页数据
    let data = {
        "banner": [{
            "id": 87,
            "title": "",
            "photo": "http:\/\/api.volzdx.cn\/images\/uploads\/2018-11\/544441543472905.jpg",
            "jump_mode": 1,
            "jump_id": 0,
            "href": "https://www.baidu.com"
        }, {
            "id": 84,
            "title": "",
            "photo": "http:\/\/api.volzdx.cn\/images\/uploads\/2018-05\/902111527492472.png",
            "jump_mode": 0,
            "jump_id": 0,
            "href": ""
        }],

            "project": [{
                "id": 2220,
                "name": "长春市志愿服务项目大赛",
                "volunteer_security": "提供饮水,提供培训,志愿服务证书",
                "list_photo": "http:\/\/api.volzdx.cn\/images\/uploads\/2018-12\/608631545026930.jpg",
                "photo": null,
                "identifier": "ZDX2018121700002220",
                "province_id": 220000,
                "province_name": "吉林省",
                "city_id": 220100,
                "city_name": "长春市",
                "county_id": 220102,
                "county_name": "南关区",
                "addr": "吉林省长春市南关区自由大路3333号",
                "content": "<p>本次活动面向全市所有志愿服务组织、所有区域开展。<\/p>",
                "contact_name": "崔健",
                "contact_phone": "88776227",
                "contact_phone_public": 1,
                "join_end": "2019-01-15",
                "begin": "2018-12-13 00:00:00",
                "end": "2019-03-15 23:59:59",
                "people_count": 1000,
                "join_people_count": 0,
                "lng": "125.3506550",
                "lat": "43.8661430",
                "reward_time": "6.00",
                "custom_config": null,
                "custom_payment_config": null,
                "created_at": "2018-12-17 15:01:00",
                "project_status": 4,
                "distance": 861306.34654428,
                "team": {
                    "id": 3147,
                    "name": "长春市志愿服务联合会",
                    "type": "党政机关",
                    "slogan": "",
                    "logo": "",
                    "identifier": "",
                    "contact_name": "崔健",
                    "contact_phone": "88776237",
                    "contact_email": "406851837@qq.com",
                    "province_id": 0,
                    "province_name": "",
                    "city_id": 0,
                    "city_name": "",
                    "county_id": 0,
                    "county_name": "",
                    "addr": "",
                    "team_photo": null,
                    "abstract": "志愿服务大家庭",
                    "reward_time": "0.00",
                    "team_size": 0,
                    "join_type": 2,
                    "stars": 0,
                    "created_at": "2018-11-16 16:22:18"
                }
            }],
            "news": [{
                "id": 20,
                "title": "关于公共文化设施开展学雷锋志愿服务的实施意见",
                "photo": "http:\/\/api.volzdx.cn\/images\/uploads\/2018-11\/125901543392711.jpeg",
                "content": "<p>围绕发挥公共文化设施培育和弘扬社会主义核心价值观、传播社会主义先进文化的重要作用，根据中宣部、中央文明办、民政部等8部门《关于支持和发展志愿服务组织的意见》（文明办〔2016〕10号）精神，现就我市深入推进公共图书馆、博物馆、文化馆、美术馆、科技馆和革命纪念馆（以下统称公共文化设施）学雷锋志愿服务，提出以下意见：<\/p><p><br><\/p><p><strong>一、<\/strong><strong>总体要求<\/strong><\/p><p><br><\/p><p>（一）指导思想<\/p><p>深入贯彻落实习近平总书记系列重要讲话精神，以培育和践行社会主义核心价值观、满足人民群众日益增长的精神文化需求为出发点，以提高国民素质和社会文明程度为目标，以公共图书馆、博物馆、文化馆、美术馆、科技馆和革命纪念馆为平台，大力弘扬“奉献、友爱、互助、进步”的志愿精神，稳步推进公共文化设施志愿服务站点建设，广泛吸引志愿者参与文化志愿服务，发展壮大学雷锋志愿服务队伍，为东北亚区域性中心城市建设提供强大的精神力量和丰润的道德滋养。<\/p><p>（二）基本原则<\/p><p>坚持正确导向。牢固树立以人民为中心的工作导向，树立红色阵地意识，把社会主义核心价值观贯穿结合融入文化志愿服务，引导人们服务他人、奉献社会，主动承担社会责任，共同建设美好生活，促进在全社会形成积极向上的精神追求和健康文明的生活方式。<\/p><p>坚持文化育人。突出爱国主义主旋律，用中华民族创造的一切精神财富来以文化人、以文育人，大力宣传中华民族的光荣历史、优秀文化和科技成果，继承五四运动以来的革命文化传统，让收藏在禁宫里的文物、陈列在广阔大地上的遗产、书写在古籍里的文字活起来，引导人们树立和坚持正确的历史观、民族观、国家观、文化观，增强做中国人的骨气和底气。<\/p><p>坚持示范带动。立足公共文化设施实际，自上而下、逐次推进，率先搞好国家级文博单位和科普场馆的志愿服务，抓点带线、以线促面，建立示范带动机制，建设一批活动规范有序、作用发挥明显、社会影响力强的示范单位，为公共文化设施开展志愿服务树立榜样和标杆，示范带动各类志愿服务组织和服务项目健康发展，促进学雷锋志愿服务制度化常态化。<\/p><p>坚持改革创新。把支持和发展公共文化设施志愿服务纳入文化体制改革，促进基本公共文化服务标准化、均等化。深化志愿服务内容和形式创新，因地制宜，科学规划，突出特色，打造品牌。深化文化志愿服务管理模式创新，鼓励志愿者自我教育、自我管理、自我服务，提高志愿服务效率，提升志愿服务水平。<\/p><p>（三）工作目标。到2020年，基本建成公共文化设施志愿服务组织体系、志愿服务项目体系和志愿服务管理制度体系。公共文化设施志愿者队伍不断壮大，志愿服务组织充满活力，志愿服务活动广泛开展，成为全社会学雷锋志愿服务的品牌、传承和弘扬中华优秀传统文化的窗口、培育和践行社会主义核心价值观的重要阵地。<\/p><p><br><\/p><p><strong>二、壮大公共文化设施志愿者队伍<\/strong><\/p><p><br><\/p><p>（四）志愿者服务内容。公共文化设施志愿者，是指以自己的时间和知识、技能、体力等，在公共文化设施提供志愿服务的个人。公共文化设施志愿者一般从事三类服务：一是社会教育，主要是讲解导览、公共教育、文化活动等；二是专业服务，主要是参与文创开发、藏品登记、专业研究、文献翻译、陈列展览等；三是辅助管理，主要是行政运行、信息咨询、环境秩序维护等。<\/p><p>（五）志愿者招募范围。公共文化设施要坚持以需求为导向招募社会志愿者，也可招募本单位职工利用工余时间参加志愿服务。鼓励面向社会招募身体健康的低龄老年志愿者，发挥他们时间充裕、服务热情高、生活阅历丰富的优势，形成公共文化设施志愿者的稳定力量。鼓励从文化单位、研究机构、专业院校招募志愿者，支持专家学者和社会知名人士积极参与，发挥他们的专业优势，提升志愿服务专业化水平。支持依法登记的社会组织特别是慈善组织及其志愿者队伍，协同公共文化设施开展志愿服务、培训和管理。倡导青少年学生到公共文化设施参加力所能及的志愿服务，培养志愿服务意识，提高社会实践能力，增强社会责任感。在校学生参与公共文化设施志愿服务，原则上应由学校统一组织。<\/p><p>（六）志愿者招募条件。公共文化设施志愿者一般应年满18周岁，具备与从事志愿服务相应的民事行为能力、身体条件、服务时间、服务技能和人文素养，能够参加志愿服务培训及相关活动。自觉遵守国家法律法规，具有良好品行，工作负责，热情礼貌，友好协作。不满18周岁的未成年人经其监护人同意或由其监护人陪同，可参加与其年龄、身心状况相适应的文化志愿服务活动。<\/p><p><br><\/p><p>三、推进公共文化设施志愿服务<\/p><p><br><\/p><p>（七）成立志愿服务组织。公共文化设施可根据志愿服务需要，经单位领导机构同意，在本单位成立志愿服务组织。公共文化设施成立的志愿服务组织可以申请成为已登记志愿服务组织的会员单位或分支机构，接受其规范指导和工作支持。达到登记条件的，可向民政部门申请依法登记。鼓励社会组织孵化基地支持公共文化设施志愿服务组织的启动成立、初期运作、项目开发、合作交流等，帮助提升公共文化设施志愿服务能力。<\/p><p>（八）设立志愿服务站点。公共文化设施结合自身实际，建立志愿服务站点，搭建志愿服务平台。建立健全科学有效的志愿服务管理制度，编写志愿服务手册或服务指南，为志愿者开展志愿服务提供基本遵循和依据。要安排工作人员做好志愿服务的组织、管理和保障，引导志愿者与公共文化设施工作人员协同配合，合力提高服务效能。<\/p><p>（九）坚持项目化运作。把面向群众、服务社会摆在首位，结合公共文化设施自身特点，精心设计开展志愿服务项目。项目定位要准确，紧密结合志愿服务对象的需求，合理安排志愿服务内容和志愿者岗位，明确岗位职责、服务标准和工作流程。志愿者招募要精准，明确每一个岗位对志愿者知识、技能、年龄、教育背景等方面的具体要求，把合适的人放在合适的岗位上，使人尽其才、才尽其用。项目实施要规范，运用管理制度规范志愿者行为，提高服务质量，打造品牌项目，扩大志愿服务社会影响。<\/p><p>（十）积极拓展服务范围。要立足单位、聚焦服务，不断拓展志愿服务领域，扩大志愿服务覆盖面。支持公共文化设施开展面向老年人、未成年人、残疾人、农民工和生活困难群众的志愿服务，大力弘扬中华民族尊老爱老、扶危济困、助人为乐的传统美德，促进社会和谐，维护社会稳定。鼓励公共文化设施与大中学校结对子，成为大中学生课外活动和社会实践基地，设计适合学生年龄特点的志愿服务项目。倡导公共文化设施加强社会合作，组织志愿者走进党政机关、企事业单位、城乡社区，举办知识讲座、巡回展览、文艺演出、阅读推广等，传播先进文化，普及科学知识。积极探索“互联网+志愿服务”，安全合规利用信息技术手段，助推志愿服务专业化、特色化和精准化。鼓励符合规定条件的公共文化设施志愿服务组织，积极承接政府购买公共文化服务项目。<\/p><p><br><\/p><p><strong>四、建立健全公共文化设施志愿服务制度<\/strong><\/p><p><br><\/p><p>（十一）做好志愿者招募和注册。公共文化设施要根据志愿服务的需要，依据“长春志愿 ”微信公众号，及时发布招募信息，明确志愿服务所需的条件和要求，组织开展经常性招募和临时性招募，使志愿服务有人做、做得好。依托全国志愿服务信息系统，建立完善志愿者注册制度，保护志愿者个人隐私。志愿者应在注册时，提供真实身份信息、服务技能、服务时间、联系方式等个人基本信息。<\/p><p>（十二）加强志愿者培训和管理。公共文化设施要根据志愿服务要求，以提升志愿者素质和能力为重点，组织学习培训，开展研讨交流，不断提高志愿者的服务意识、服务能力和服务水平。加强志愿者骨干的培养，使他们成为公共文化设施志愿服务的中坚力量。跟踪掌握志愿者接受培训、参加服务的情况，评估服务效果，及时改进提高，实现志愿者、服务对象和服务项目的有效衔接。坚持管理与服务并重，尊重志愿者意愿和劳动成果，保护志愿者的合法权益，吸引和留住优秀志愿者。<\/p><p>（十三）健全志愿服务考核激励机制。公共文化设施要建立和完善志愿服务记录制度，开展以志愿服务时间和服务质量为主要内容的综合评价，调动和保护志愿者的积极性和服务热情。要充分体现志愿服务自愿、无偿、利他、平等的特点，建立志愿者嘉许制度，褒扬和嘉奖本单位招募的优秀志愿者，积极探索优秀志愿者激励回馈制度。按照“谁证明谁负责”的原则，逐步建立志愿服务虚*屏蔽的关键字*明责任追究制度和监督检查制度。<\/p><p>（十四）加强志愿服务保障和支持。公共文化设施要将开展学雷锋志愿服务纳入事业发展规划，列入重要议事日程，制定保障措施和支持措施，促进志愿服务持续健康发展。要结合实际制定实施方案，明确具体责任部门和责任人，扎实推进工作落实，不断提高志愿服务的科学化、规范化和社会化水平。要保障志愿者必要的工作条件，为开展志愿服务提供必要的经费支持。根据志愿服务活动的需要，为志愿者提供适当的交通、误餐等补助，购买必要保险、提供基本保障，切实维护志愿者的正当权益。<\/p><p><br><\/p><p><strong>五、加强组织领导<\/strong><\/p><p><br><\/p><p>（十五）明确工作职责。落实中央文明委工作部署，把公共文化设施志愿服务纳入学雷锋志愿服务总体工作，统筹安排、共同推进。各地文明办要发挥好牵头作用，民政部门要切实履行行政管理工作职责，宣传、教育、文化、文物、科协等有关部门要结合工作职能，发挥自身优势，加强宣传引导，按照有关规定对作出突出贡献的志愿者和志愿服务组织进行表彰奖励，积极营造支持和参与公共文化设施学雷锋志愿服务的良好社会氛围。<\/p><p>（十六）发挥示范作用。制定我市各公共文化设施学雷锋志愿服务具体工作方案，逐一明确志愿者数量、岗位、条件和报名方式，在市直媒体公布，形成社会声势，广泛吸引志愿者参与，激励示范单位发挥带头作用，走在前列。公共文化设施的党政领导干部、共产党员、共青团员要作出表率，积极参加学雷锋志愿服务。市志愿服务联合会要发挥好联络协调作用，推动行业性和区域性学雷锋志愿服务活动开展，促进地区间文化志愿服务协同联动，形成合力。    <\/p><p style=\"text-align: right;\"><strong>中共长春市委宣传部<\/strong><\/p><p style=\"text-align: right;\"><strong>长春市教育局<\/strong><\/p><p style=\"text-align: right;\"><strong>长春市民政局<\/strong><\/p><p style=\"text-align: right;\"><strong>长春市文化局<\/strong><\/p><p style=\"text-align: right;\"><strong>长春市科协<\/strong><\/p><p style=\"text-align: right;\"><strong>长春市文明办<\/strong><\/p><p style=\"text-align: right;\">2017年6月30日<\/p>",
                "publish_time": "2018-11-28 08:37:35"
            }, {
                "id": 21,
                "title": "关于支持和发展志愿服务组织的实施意见",
                "photo": "http:\/\/api.volzdx.cn\/images\/uploads\/2018-11\/499501543393328.jpg",
                "content": "<p>  志愿服务是现代社会文明进步的重要标志，是加强精神文明建设、培育和践行社会主义核心价值观的重要内容。志愿服务组织是以开展志愿服务为宗旨的非营利性社会组织，是汇聚社会资源、传递社会关爱、弘扬社会正气的重要载体，是形成向上向善、诚信互助社会风尚的重要力量。近年来，我市志愿服务事业快速发展，志愿服务组织不断涌现，对促进志愿服务活动广泛开展，推进精神文明建设、推动社会治理创新、维护社会和谐稳定发挥了重要作用。同时，我市志愿服务组织在总体上还存在着数量不足、能力不强、发展环境有待优化等问题。现就支持和发展志愿服务组织，提出以下意见：<\/p><p><br><\/p><p>一、总体要求<\/p><p><br><\/p><p><strong>（一）指导思想。<\/strong>深入贯彻习近平总书记系列重要讲话精神，坚持以培育和践行社会主义核心价值观、满足人民群众日益增长的社会服务需求为出发点，以能力建设为基础，以建立健全政策制度、完善体制机制、增强法律保障为重点，积极扶持发展志愿服务组织，为加强和创新社会治理，促进东北亚区域性中心城市建设凝聚力量。<\/p><p><strong>（二）基本原则。<\/strong>坚持分类指导、突出特色。注重服务与管理并举，畅通联系渠道，有效发挥志愿服务组织作用。遵循志愿服务组织发展规律，根据志愿服务组织类别和规模，指导各类志愿服务组织明确定位、强化管理，提升能力、突出特色，创新方式、拓展领域，有效释放创造力和生产力，不断提高志愿服务专业化科学化水平。坚持正确引导、依法自治。坚持党委领导、政府监管，充分发挥基层党组织的战斗堡垒作用，发挥共产党员先锋模范作用和骨干作用，确保志愿服务组织发展的正确方向。充分尊重志愿服务组织的社会性、志愿性、公益性、非营利性特点，引导志愿服务组织按照法律法规和章程开展活动，依法自治。坚持创新发展、多方参与。着力推进志愿服务组织、志愿者与志愿服务活动共同发展，筑牢志愿服务组织基础。鼓励国家机关、群团组织、企事业单位、其他社会组织和基层群众性自治组织建立志愿服务队伍，引导民生和公共服务机构开门接纳志愿者，形成志愿服务工作合力，扩大志愿服务社会覆盖。<\/p><p><strong>（三）主要目标。<\/strong>到2020年，基本建成与经济社会发展相适应，布局合理、管理规范、服务完善、充满活力的志愿服务组织体系。志愿服务组织发展环境得到优化，初步形成登记管理、资金支持、人才培育等配套政策。志愿服务组织服务范围不断扩大，基本覆盖社会治理各领域、群众生活各方面，涌现一批公信度高、带动力强的志愿服务组织。志愿服务组织功能有效发挥，成为推进人们相互关爱、传递文明的重要渠道，成为提升社会服务水平、改善民生福祉的有力助手，成为增进社会信任、维护社会稳定、促进社会和谐的有生力量。<\/p><p><br><\/p><p>二、加强志愿服务组织培育<\/p><p><br><\/p><p><strong>（四）推进志愿服务组织依法登记。<\/strong>坚持积极引导发展、严格依法管理的原则，提供便捷高效的服务，引导符合登记条件的志愿服务组织依法登记。针对目前大部分志愿服务组织规模小、注册资金不足、缺乏相应专职人员和固定场所的实际，在不违背社会组织管理法律法规基本精神基础上，可以按照活动地域适当放宽成立志愿服务组织所需条件。各有关部门要在活动场地、活动资金、人才培养等方面提供优先支持，激发志愿服务组织依法登记的积极性与主动性。经单位领导机构或基层群众性自治组织同意成立的志愿服务组织，可以在本单位、本社区内部开展志愿服务活动。鼓励已经登记的志愿服务组织为其提供规范指导和工作支持。<\/p><p><strong>（五）健全志愿服务组织孵化机制。<\/strong>社会组织孵化基地要吸纳志愿服务组织进驻，在项目开发、能力培养、合作交流、业务支持等方面提供有针对性的扶持。鼓励有条件的地区建立专门的志愿服务组织孵化基地，支持志愿服务组织的启动成立和初期运作，帮助提升服务能力。积极建立志愿服务组织与国家机关、群团组织、企事业单位、其他社会组织和基层群众性自治组织的沟通交流平台，鼓励银行、会计师事务所、律师事务所等专业机构为志愿服务组织提供免费的资金证明、审计、法律咨询等服务。<\/p><p><strong>（六）积极推进志愿服务组织承接公共服务项目。<\/strong>各地各有关部门和符合条件的事业单位、群团组织要贯彻落实《国务院办公厅关于政府向社会力量购买服务的指导意见》(国办发〔2013〕96号）和《政府购买服务管理办法（暂行）》(财综〔2014〕96号）有关要求，充分发挥志愿服务成本低、效率高，志愿服务组织灵活度高、创新性强的特点，积极支持志愿服务组织承接扶贫、济困、扶老、救孤、恤病、助残、救灾、助医、助学等领域的志愿服务，加大财政资金对志愿服务运营管理的支持力度。充分利用志愿服务信息平台等载体，及时发布政府安排由社会力量承担的服务项目，为志愿服务组织获取相关信息提供便利。<\/p><p><strong>（七）完善志愿服务组织监督管理。<\/strong>加强志愿服务组织日常监管，建立登记管理机关、业务主管单位、行业管理部门、行业组织和社会公众等多元主体参与，行政监管、行业自律和社会监督有机结合的监督管理机制。探索建立登记管理机关评估、资助方评估、服务对象评估和自评有机结合的志愿服务组织综合评价体系，逐步引入第三方评估机制，定期对志愿服务组织的基础条件、内部治理、工作绩效和社会评价等进行跟踪评估，将评估情况作为政府购买社会服务、社会各界资助以及落实相关优惠政策的重要依据。推进志愿服务组织诚信建设，将志愿服务组织守信情况纳入社会组织诚信指标体系。对业务活动与志愿服务宗旨、性质严重不符的志愿服务组织建立退出机制；志愿服务组织行为违反法律法规规定的，依法追究相关法律责任。<\/p><p><strong>（八）强化志愿服务组织示范引领。<\/strong>通过政策引导、重点培育、项目资助等方式，建设一批活动规范有序、作用发挥明显、社会影响力强的示范性志愿服务组织。按照有关规定对作出突出贡献的志愿服务组织进行表彰奖励。通过推广志愿服务组织培育和管理经验、建设优秀志愿服务组织库和优秀志愿服务项目库等方式，引领带动其他志愿服务组织科学化规范化发展。<\/p><p><br><\/p><p>三、提升志愿服务组织能力<\/p><p><br><\/p><p><strong>（九）完善组织内部治理。<\/strong>登记管理机关、业务主管单位和行业管理部门要指导已登记的志愿服务组织依据章程建立健全独立自主、权责明确、运转协调、制衡有效的内部治理结构。具备条件的志愿服务组织应设立党的组织，充分发挥党组织的政治核心作用，围绕党章赋予基层党组织的基本任务开展工作，团结凝聚志愿者，保证志愿服务组织的政治方向；暂不具备条件的，要明确责任单位指导志愿服务组织开展党建工作，条件成熟时及时建立党的组织。坚持党建带群建，充分发挥群团组织的积极作用。志愿服务组织应当为自身党群组织开展活动、发挥作用提供必要支持。重点完善组织决策、执行、监督制度和内部议事规则，建立健全人、财、物管理制度和内部信息披露制度，准确、完整、及时地向社会公开组织的名称、住所、负责人、机构设置等基本情况，公开年报公告、财务收支、捐资使用、服务内容、奖惩情况等重要信息，主动接受登记管理机关的监督管理和社会监督，努力提升志愿服务组织的社会公信力。有会员单位或分支机构的，应指导其加强内部管理。<\/p><p><strong>（十）创新人才培养机制。<\/strong>建立全市志愿服务组织人才示范培训机制，有条件的地区可依托高等院校、党校、团校等教育培训机构建立志愿者培训基地，加快培养一批长期参与志愿服务、熟练掌握服务知识和岗位技能的志愿者骨干，着力培养一批富于社会责任感、熟悉现代管理知识、拥有丰富管理经验的志愿服务组织管理人才。国家机关、群团组织、企事业单位、其他社会组织和基层群众性自治组织要积极支持本单位、本社区的专业人才加入志愿服务组织，开展志愿服务活动，不断优化志愿者队伍结构。志愿服务组织要注重招募、使用专业志愿者，建立健全志愿者日常管理培训制度，对于专业性要求高的志愿服务项目，要强化专业知识和技能培训，不断提高志愿者能力素质。引导志愿服务组织通过规范招募、科学管理、创新服务，培养、吸引和留住优秀志愿者。<\/p><p><strong>（十一）增强组织造血功能。<\/strong>积极探索通过志愿服务交流会、志愿服务项目大赛等有效举措，指导志愿服务组织牢固树立项目意识、品牌意识，不断提升战略谋划、项目运作和宣传推广能力，通过优秀的服务项目和服务品牌争取各方资源，吸引资助者。支持志愿服务组织通过承接公共服务项目、积极参加公益创业和公益创投、争取政府补贴与社会捐赠等多种途径，妥善解决志愿服务运营成本问题，为组织持续发展提供动力。<\/p><p><strong>（十二）加强志愿服务行业自律。<\/strong>加大对志愿服务领域行业组织的扶持发展力度，充分发挥其在志愿服务组织管理中的先行规范和自我约束作用，引导行风建设，加强行业监督，为志愿服务组织监管提供有力辅助；充分发挥行业组织在志愿服务组织服务中的牵头和协调作用，促进行业沟通，反映行业诉求，推动行业创新，为志愿服务组织发展争取有力支持。各地要为志愿服务行业组织发挥行业监督约束作用、加强道德建设创造良好环境，逐步建立健全与行业发展相适应、覆盖全面、运行有效、作用明显的行业自律体系。<\/p><p><br><\/p><p>四、深化志愿服务组织服务<\/p><p><br><\/p><p><strong>（十三）强化志愿服务供需对接。<\/strong>立足需求，着眼民生，有关单位和社区要积极向志愿服务组织开放更多公共资源，鼓励街道（乡镇）、城乡社区为志愿服务组织提供服务场所。充分运用社区综合服务设施，搭建社区志愿服务平台。支持和鼓励社会志愿服务组织走进社区，了解和征集群众需求，结合自身能力特点，有针对性地做好志愿服务规划，设计服务项目，开展服务活动，切实使服务对象受益。充分利用信息技术手段，及时有效匹配志愿服务供给与需求。推广“菜单式”志愿服务经验，鼓励引导志愿服务组织公开本组织志愿者技能、特长和提供服务时间等信息，与群众需求有机结合，逐步建立志愿服务供需有效对接机制和服务长效机制，全面提高志愿服务水平。<\/p><p><strong>（十四）推广“社会工作者+志愿者”协作机制。<\/strong>鼓励志愿服务组织招募使用社会工作者，鼓励社会工作服务机构等社会组织在开展公益活动时招募志愿者。建立志愿服务组织与社会工作服务机构等社会组织常态化合作机制，充分发挥社会工作者在组织策划、项目运作、资源链接等方面的专业优势，发挥志愿者热情高、来源广、肯奉献的人力资源优势，形成社会工作者和志愿者协调配合、共同开展服务的格局，促进志愿服务专业化规范化。<\/p><p><strong>（十五）全面推行志愿服务记录制度。<\/strong>依托和完善“长春志愿”微信公众号，实现志愿服务信息的互联互通和数据的有效汇集，为志愿服务组织管理志愿者、开展志愿服务记录工作提供技术支撑。各地各有关部门要指导志愿服务组织及时、完整、准确记录志愿者参加志愿服务的信息，保护志愿者个人隐私，规范开具志愿服务记录证明，科学开展志愿者星级认定，建立健全志愿服务时间储蓄制度，不断提高志愿服务组织的服务效能和管理水平。<\/p><p><strong>（十六）创新志愿服务方式方法。<\/strong>指导志愿服务组织明确服务方向，紧紧围绕党和政府中心工作和群众所需所盼，持续推进扶贫、济困、扶老、救孤、恤病、助残、救灾、助医、助学和大型社会活动等重点领域的志愿服务。支持志愿服务组织发挥优势、各展所长，积极推进党员志愿服务、青年志愿服务、老年志愿服务、学生志愿服务、巾帼志愿服务等有序开展，打造项目精品，形成品牌效应。鼓励博物馆、图书馆、纪念馆、文化馆、文物保护单位等设立志愿服务站点，招募使用志愿者。积极探索“互联网+志愿服务”，支持志愿服务组织安全合规利用互联网优化服务，创新服务方式，提高服务效能，加强对网络社团等新型组织的志愿服务规范管理。严格规范志愿服务组织涉外合作，确保遵守国家有关法律法规和政策。<\/p><p><br><\/p><p>五、加强对志愿服务组织发展的组织领导<\/p><p><br><\/p><p><strong>（十七）健全工作机制。<\/strong>坚持党委政府领导，落实中央文明委工作部署，文明办要发挥好牵头作用，民政部门要切实履行行政管理工作职责，与相关部门、人民团体和群众团体共同推进志愿服务组织发展。各地各有关部门要注重研究、规划和推动志愿服务事业，细化政策措施，加大激励保障力度，建立健全支持和发展志愿服务组织的长效机制，推动形成志愿服务工作经常化制度化。各级党政领导干部要充分发挥示范带头作用，利用工作之余参与志愿服务活动。倡导鼓励广大公务员、专业技术人员、企事业单位干部职工、公众人物等积极加入志愿服务组织，参加志愿服务活动，共产党员、共青团员要作出表率。<\/p><p><strong>（十八）加大经费支持和保险保障。<\/strong>各地要逐步扩大财政资金对志愿服务组织发展的支持规模和范围，加强对志愿服务组织的财税政策支持，落实各项财税优惠政策。积极推进政府购买服务，支持志愿服务组织立足自身优势，承接相关服务项目。单位领导机构和基层群众性自治组织对单位、社区内部志愿服务组织开展志愿服务活动，要给予经费支持。依法大力发展志愿服务基金，切实加强管理，积极搭建爱心企业、爱心人士与志愿服务组织之间的桥梁，引导社会资金参与支持志愿服务组织发展。鼓励多渠道筹资为志愿者购买保险，鼓励保险公司与志愿服务组织合作，设计开发符合志愿服务特点、适应志愿服务发展需要的险种，为志愿服务活动承保，为志愿服务组织健康持续发展提供有力保障。<\/p><p><strong>（十九）营造良好环境。<\/strong>要在全社会大力弘扬雷锋精神，弘扬奉献、友爱、互助、进步的志愿精神，培育学雷锋志愿服务文化。坚持立足中国国情，体现中国特色，讲好中国故事，积极支持有利于志愿服务发展的研究、交流与合作。加强志愿服务经验总结和推广交流，广泛宣传志愿服务组织在提高国民素质和社会文明程度、加强社会治理创新、保障改善民生中的重要作用，为志愿服务组织发展营造良好氛围。<\/p><p style=\"text-align: right;\"><strong>中共长春市委宣传部 <\/strong><\/p><p style=\"text-align: right;\"><strong>长春市文明办<\/strong><\/p><p style=\"text-align: right;\"><strong>长春市民政局<\/strong><\/p><p style=\"text-align: right;\"><strong>长春市教育局<\/strong><\/p><p style=\"text-align: right;\"><strong>长春市财政局<\/strong><\/p><p style=\"text-align: right;\"><strong>长春市总工会<\/strong><\/p><p style=\"text-align: right;\"><strong>长春市妇联<\/strong><\/p><p style=\"text-align: right;\"><strong>共青团长春市委<\/strong><\/p><p style=\"text-align: right;\"><strong> 2017年6月30日<\/strong><\/p>",
                "publish_time": "2018-11-28 08:36:19"
            }],
            "sanlitun": 0
    }
    // 用户信息数据
    let userInfoData = {
        id: 370197, username: "17600071910", email: "", phone: "17600071910",
        // avatars: "http://tpc.googlesyndication.com/daca_images/simgad/17480219307005942326",
        avatars: "http://tpc.1.com/daca_images/simgad/17480219307005942326",
        real_name: "", nation: "", sex: 0, birthday: "", identifier: "V190108370197", slogan: "文明点亮你我，志愿感动社会", reward_time: "0.00", id_number: "", province_id: 0, province_name: "", city_id: 0, city_name: "", county_id: 0, county_name: "", addr: "", score: 10, family_id: 0, relation: "", join_family_time: "", extends: null, stars: 0, in_blacklist: 0, regitser_time: "2019-01-08 10:42:47", server_time: "2019-01-08 10:47:43", have_pwd: 0, join_project_count: 0, token: "c752b7894f141cdc3777f479030231575c340e274a4e9"
    };
 

    rightHeader(userInfoData);
    initSwiper(data&&data.banner);
    initNews(data && data.news)
    if (window.orgCode == "VolejRejNm") {
        initMent(deleteSanlitunMoudling(window.orgInfo.module_settings));
    } else {
        initMent(window.orgInfo.module_settings);
    }
    initProjectMenu(data && data.sanlitun);
    initProject(data && data.sanlitun,data && data.project);
   
  


   
    // 右上角用户信息显示头像、登录按钮
    function rightHeader(data) {
        if (!data || !data.id) {
            let dom = `<a href='${href}/selectcity'><div class="city-name">北京</div></a><div style="display: flex; width: 280px;"><a href="/homesearch" class="component-search-newbar"><input class="input" placeholder="搜索项目/团队" disabled="" style="margin-left: 35px;"></a><a href='${href}/my/entry'><div class="login-button">登录</div></a></div>`;
            $(".header-bar")[0].innerHTML = dom;
            return
        } else {
            let dom = `<a href='${href}/selectcity'><div class="city-name">北京</div></a>
            
            <div style="display: flex; flex: 1 1 0%;"><div class="content-boxpadding">
            <a href=='${href}/homesearch' class="component-search-bar dirmargin">
            <input class="input" placeholder="搜索项目/团队" disabled="" style="margin-left: 35px;"></a>
            </div>
              <a href='${href}/my'>
            <img data-type=1  src=${data.avatars} style='width:28px;height:28px;border-radius:50%; object-fit: cover;' />
            </div></a></div>`;
            $(".header-bar")[0].innerHTML = dom;
            return
        }
    }
    // 初始化轮播图
    function initSwiper(data) {
        const orgCode = window.orgCode;
        const token = window.token;
        if (!data||!data.length) {
            $(".swiper-container")[0].innerHTML =`<div class="swiper-container-empty"></div>`;
            return
        } 
        $.each(data, function (index, item) {
            let url = "";
            const mode = item.jump_mode;
            if (orgCode == "wMvbmOeYAl" || orgCode == "KGRb41dBLZ"){
                if (mode === 1) {
                    if (token == '') {
                        url = `${href}/my/entry`;
                    } else {
                        // 第三方
                        url = item.href;
                    }
                } else if (mode === 2) {
                    // 项目
                    url = `${href}/project/detail/${item.jump_id}`;
                } else if (mode === 3) {
                    // 团队
                    url = `'${href}/team/detail/${item.jump_id}`;
                }
            } else {
                if (mode === 1) {
                    url = item.href;
                } else if (mode === 2) {
                    // 项目
                    url = `${href}/project/detail/${item.jump_id}`;
                } else if (mode === 3) {
                    // 团队
                    url = `'${href}/team/detail/${item.jump_id}`;
                }
            }
            $(".swiper-wrapper").append(`
            <a class="swiper-slide" href=${url}>
                <img data-type=2  src=${item.photo} style='width:100%;height:100%; object-fit: cover;' />
            </a>
            `);
        })
        let Swipe = new Swiper(".swiper-container", {
          autoplay: {
            delay: 6000,
            disableOnInteraction: false
          },
          pagination: {
            el: ".swiper-pagination"
          }
        });
    }
    // 消息公告
    function initNews(data) {
        if (!data && !data.length) {
            return null
        }
        let dom = '';
        $.each(data, function (index, item) {
            dom += `<div class="swiper-slide">${item.title}</div>`
        })
        $(".page-home-header").append(`
           <a class="notice" href='${href}/notice'>
           <div class="components-announcement-container">
                <div class="swiper-wrapper">
                ${dom}
                </div>
               </div>
            </a>
            `);
        let notice = new Swiper(".components-announcement-container", {
            direction: "vertical",
            autoplay: true,
        });
    }
    // menu
    function initMent(data) {
        const DEFAULT_LINK = `${href}/building`;
        const MODULE_LINK = {
            volunteer_project: `${href}/project/list`,
            volunteer_team: `${href}/team/list`,
            reward_history: `${href}/my/duration/applys`,
            help_center: `${href}/my/service`,
            联盟互动: 'https://buluo.qq.com/p/barindex.html?bid=334308&from=wechat',
            volunteer_strategy: 'http://m.guide.volunteerzhiduoxing.cn',
            1234: 'http://sanlitunweb.parkingkj.com/showhtml/sayvillage.html',
            // volunteer_feedback: `http://${location.host}/tmall`,
            volunteer_feedback: `${href}/shop`,
            volunteer_ensure: `${href}/ensure`,
            good_example: `${href}/sanlitun/starModel`,
            claim_project: `${href}/sanlitun/projectClaim/list`,
            community_interact: `${href}/my/circlevisits`,
        };
        if (!data && !data.length) {
            return
        }
        let dom = '';
        const newMenus = [];

        data.forEach((menuLine, idx) => {
            newMenus.push([]);
            menuLine.forEach(menu => {
                newMenus[idx].push({
                    ...menu,
                    link: MODULE_LINK[menu.key] || DEFAULT_LINK
                });
            });
        });
        $.each(newMenus, function (index, item) {
            dom += `<li>`
            $.each(item, function (index, menu) {
                dom += `<a href=${menu.link}>
                <img data-type=3 class="menu-icon" src=${menu.icon} 
                style='width:35px;height:35px;object-fit: cover;'
                />
                <span>${menu.settings ? menu.settings.label : menu.label}</span>
              </a>`;
            });
            dom += `</li>`

        });
        $(".page-home-body").append(`
            <ul class="component-menus">
            ${dom}
            </ul>
            `);
    }
    // 渲染projectmenu
    function initProjectMenu(data) {
        let dom;
        if (Number(data) == 1) {
            dom = `<div>
                  <div style='width: "100%";height: "10px"'></div>
                  <div class="project-list">
                    <div class="list-header">
                      <div class="main-label">
                        <div class="label-line" />
                        <span>回馈激励</span>
                        <div class="label-line" />
                      </div>
                      <div class="sub-label">Feedback and Incentive</div>
                    </div>
                  </div>
                  <div class="page-home-feedback-show-container">
            <a href='${href}/shop'>
                <img
                data-type=3
                    src="./images/sanlitun/feedback1.jpg"
                    alt="回馈展示"
                />
            </a>
             <a href='${href}/shop'>
                <img
                  data-type=3
                    src="./images/sanlitun/feedback2.jpg"
                    alt="回馈展示"
                />
            </a>
             <a href='${href}/shop'>
                <img
                  data-type=3
                    src="./images/sanlitun/feedback4.png"
                    alt="回馈展示"
                />
            </a>
                  </div >
                <div style='width: "100%"; height: "10px"'/>
                </div >`;
        } else if (Number(data) == 0) {
            dom = `<div class="menus-activity">
                <a href="${href}/project/list/type/1/category/1000/target/1000">
                    <img   data-type=3 src="./images/activities_nearby.png" alt="附近" />
                </a>
                <a href="${href}/project/list/type/0/category/1000/target/1000">
                    <img   data-type=3 src="./images/activities_new.png" alt="最新" />
                </a>
                <a href="${href}/project/list/type/2/category/1000/target/1000">
                    <img    data-type=3 src="./images/activities_hot.png" alt="最热" />
                </a>
                </div>
`;
        }
        $(".page-home-body").append(dom);
    }
    // 底部推荐
    function initProject(sanlitun, data) {
        let isSanlitun = Number(sanlitun);
        let dom = `<div class="project-list">
            <div class="list-header">
                <div class="main-label">
                    <div class="label-line" />
                    <span>${isSanlitun ? "联盟活动" : "精品活动"} </span>
                    <div class="label-line" />
                </div>
                <div class="sub-label">${isSanlitun ? "Alliance Activities" : "：Favored Activities"}</div>
            </div>
            <div class="line1px" /> 
        `;
        if (data) {
            dom += `<ul class="component-projects">`;
            $.each(data, function (index, project) {
                const { team } = project;
                const volunteer = isVolunteerInsure(project.volunteer_security);
                let classLabel;
                if (project.project_status === 2) {
                    classLabel = 'project-status-recruit';
                } else if (project.project_status === 3) {
                    classLabel = "project-status-full";
                } else if (project.project_status === 4) {
                    classLabel = "project-status-progress";
                } else if (project.project_status === 5) {
                    classLabel = "project.project_status";
                }
                dom += `
                <li key=${project.id}>
                <div>
                  <a href='${href}/team/detail/${project.team.id}' class="project-header">
                   <img data-type=3 style='width:30px;height:30px;border-radius:4px;object-fit:cover;' src=${team.logo} />
                    <div class="org-name">${team.name}</div>
                  </a>
                  <a href='${href}/project/detail/${project.id}' class="project-main">
                 <img data-type=2 class="image" src=${project.list_photo}  style='width:100%;height:200px;border-radius:4px; object-fit: cover;' />
                     <div class="project-name">
                      ${project.name}
                `;
                if (volunteer) {
                    dom += ` <div class='project-name-logo'></div>
                    </div>`;
                } else {
                    dom += `</div>`;
                }
                dom += `<div class="project-date">
                      活动日期：${parseTimeStringToDateString(project.begin)}-${parseTimeStringToDateString(project.end)}
                    </div><div class='project-status ${classLabel}'></div></a> <div class="project-footer">
                    <div class="project-location"> ${project.county_name} ${project.distance > 0 ? parseDistance(project.distance) : null}
                    </div>
                    <div class="project-members">
                      <span>
                       ${project.join_people_count}
                      </span>
                        &nbsp;&nbsp;/
                      <span>${project.people_count}</span>
                    </div>
                  </div>
                </div>
              </li>

                `;
            });

            dom += '</ul></div>'
        } else {
            dom += '<div class="projects-empty-tip">目前还没有活动哦</div></div>';
        }

        $(".page-home-body").append(dom);

    }



     function getLocation(success, fail, noCache) {
        if (window.dev) {
            success({
                lng: '116.314820',
                lat: '40.065560',
            });
            return;
        }
        let cachedLoc = localStorage.getItem('location');
        cachedLoc = cachedLoc ? JSON.parse(cachedLoc) : cachedLoc;

        if ((cachedLoc && cachedLoc.expires <= Date.now()) || noCache === true) {
            cachedLoc = null;
        }
        if (!cachedLoc) {
            // alert(`${JSON.stringify(navigator.geolocation)}`)
            // navigator.geolocation.getCurrentPosition(function (position) {
            //   const lat = position.coords.latitude; // 纬度，浮点数，范围为90 ~ -90
            //   const lng = position.coords.longitude; // 经度，浮点数，范围为180 ~ -180
            //   const expires = Date.now() + (5 * 60 * 1000); // 5分钟过期

            //   localStorage.setItem('location', JSON.stringify({
            //     lat,
            //     lng,
            //     expires,
            //   }));
            //   success({
            //     lat,
            //     lng,
            //   });

            // });

            var geolocation = new qq.maps.Geolocation("GT7BZ-UXACR-R2JWZ-WYSXR-DHWJV-VEFAI", "myapp");
            var options = { timeout: 8000 };
            geolocation.getLocation(function (position) {
                const lat = position.lat; // 纬度，浮点数，范围为90 ~ -90
                const lng = position.lng; // 经度，浮点数，范围为180 ~ -180
                const expires = Date.now() + (5 * 60 * 1000); // 5分钟过期

                localStorage.setItem('location', JSON.stringify({
                    lat,
                    lng,
                    expires,
                }));
                success({
                    lat,
                    lng,
                });
            }, options)

        } else if (success) {
            success({
                lat: cachedLoc.lat,
                lng: cachedLoc.lng,
            });
        }
    }

   function getCity(success, fail) {

        if (window.dev) {
            const city = '北京市';
            const province = '北京';
            localStorage.setItem('provinceAndCityName', JSON.stringify({
                city,
                province,
            }));

            success(JSON.parse(localStorage.getItem('provinceAndCityName')).city || '北京');
            return;
        }

        getLocation((loc) => {
            const geocoder = new qq.maps.Geocoder({
                complete: (result) => {
                    if (result.detail.addressComponents
                        && result.detail.addressComponents.city) {
                        if (!success) {
                            console.log(result);
                            return;
                        }
                        // result.detail.addressComponents.province
                        const city = result.detail.addressComponents.city;
                        const province = result.detail.addressComponents.province;
                        localStorage.setItem('provinceAndCityName', JSON.stringify({
                            city,
                            province,
                        }));
                        success(result.detail.addressComponents.city.replace('市', ''));
                    } else if (fail) {
                        fail({});
                    }
                },
            });
            const coord = new qq.maps.LatLng(loc.lat, loc.lng);
            geocoder.getAddress(coord);

        }, (error) => {
            if (fail) {
                fail(error);
            }
        });
    }

    // 图片处理
    document.addEventListener("error", function (e) {
        var errorUrl = null;
       
        var elem = e.target;
        var type = $(elem).attr('data-type');
        
        if (elem.tagName.toLowerCase() == 'img') {
            if (type == '1') {
                // 用户默认
                errorUrl = "./images/register.png";
            } else if (type == '2') {
                // 轮播默认
                errorUrl = "./images/default_banner.png";
            } else if (type == '3') {
                errorUrl = "./images/default_avatar.png";
            }
            elem.src = errorUrl;
        }
    }, true);

    // 去除三里屯志愿回馈
    function deleteSanlitunMoudling(data) {

        var newData = data.map((item) => {
            return (
                item.filter((ite) => {
                    return ite['key'] != 'volunteer_feedback';
                })
            )
        })
        return newData
    }
    function isVolunteerInsure(str) {
        if (str.indexOf('志愿者保险') !== -1) {
            return true;
        }
        return false;
    }
    function parseTimeStringToDateString(timeString) {
        const dateString = timeString.split(' ')[0];
        return dateString.replace(/-/g, '.');
    }
    function parseDistance(distance) {
        let parsedDistance = distance / 1000;

        if (parsedDistance < 10) {
            parsedDistance = parsedDistance.toFixed(1);
        } else {
            parsedDistance = parseInt(parsedDistance, 10);
        }

        return `${parsedDistance}km`;
    }


})();
